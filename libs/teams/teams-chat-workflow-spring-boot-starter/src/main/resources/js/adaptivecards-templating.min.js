!function(e, t) {
    "object" == typeof exports && "object" == typeof module ? module.exports = t(require("adaptive-expressions")) : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.ACData = t(require("adaptive-expressions")) : e.ACData = t(e.AEL)
}(this, (function(e) {
    return function(e) {
        var t = {};
        function r(n) {
            if (t[n])
                return t[n].exports;
            var i = t[n] = {
                i: n,
                l: !1,
                exports: {}
            };
            return e[n].call(i.exports, i, i.exports, r), i.l = !0, i.exports
        }
        return r.m = e, r.c = t, r.d = function(e, t, n) {
            r.o(e, t) || Object.defineProperty(e, t, {
                enumerable: !0,
                get: n
            })
        }, r.r = function(e) {
            "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
                value: "Module"
            }),
            Object.defineProperty(e, "__esModule", {
                value: !0
            })
        }, r.t = function(e, t) {
            if (1 & t && (e = r(e)), 8 & t)
                return e;
            if (4 & t && "object" == typeof e && e && e.__esModule)
                return e;
            var n = Object.create(null);
            if (r.r(n), Object.defineProperty(n, "default", {
                enumerable: !0,
                value: e
            }), 2 & t && "string" != typeof e)
                for (var i in e)
                    r.d(n, i, function(t) {
                        return e[t]
                    }.bind(null, i));
            return n
        }, r.n = function(e) {
            var t = e && e.__esModule ? function() {
                return e.default
            } : function() {
                return e
            };
            return r.d(t, "a", t), t
        }, r.o = function(e, t) {
            return Object.prototype.hasOwnProperty.call(e, t)
        }, r.p = "", r(r.s = 0)
    }([function(e, t, r) {
        "use strict";
        var n = this && this.__createBinding || (Object.create ? function(e, t, r, n) {
                void 0 === n && (n = r),
                Object.defineProperty(e, n, {
                    enumerable: !0,
                    get: function() {
                        return t[r]
                    }
                })
            } : function(e, t, r, n) {
                void 0 === n && (n = r),
                e[n] = t[r]
            }),
            i = this && this.__exportStar || function(e, t) {
                for (var r in e)
                    "default" === r || t.hasOwnProperty(r) || n(t, e, r)
            };
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        i(r(1), t)
    }, function(e, t, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.Template = t.GlobalSettings = void 0;
        var n = r(2),
            i = function() {
                function e(e) {
                    this._stateStack = [],
                    void 0 !== e && (this.$root = e.$root)
                }
                return e.prototype.isReservedField = function(t) {
                    return e._reservedFields.indexOf(t) >= 0
                }, e.prototype.saveState = function() {
                    this._stateStack.push({
                        $data: this.$data,
                        $index: this.$index
                    })
                }, e.prototype.restoreLastState = function() {
                    if (0 === this._stateStack.length)
                        throw new Error("There is no evaluation context state to restore.");
                    var e = this._stateStack.pop();
                    this.$data = e.$data,
                    this.$index = e.$index
                }, Object.defineProperty(e.prototype, "$data", {
                    get: function() {
                        return void 0 !== this._$data ? this._$data : this.$root
                    },
                    set: function(e) {
                        this._$data = e
                    },
                    enumerable: !1,
                    configurable: !0
                }), e._reservedFields = ["$data", "$when", "$root", "$index"], e
            }(),
            o = function() {
                function e() {
                    this._memory = new n.SimpleObjectMemory(this)
                }
                return e.prototype.getValue = function(e) {
                    var t = e.length > 0 && "$" !== e[0] ? "$data." + e : e;
                    return this._memory.getValue(t)
                }, e.prototype.setValue = function(e, t) {
                    this._memory.setValue(e, t)
                }, e.prototype.version = function() {
                    return this._memory.version()
                }, e
            }(),
            a = function() {
                function e() {}
                return e.getUndefinedFieldValueSubstitutionString = void 0, e
            }();
        t.GlobalSettings = a;
        var u = function() {
            function e(t) {
                this._preparedPayload = e.prepare(t)
            }
            return e.prepare = function(t) {
                if ("string" == typeof t)
                    return e.parseInterpolatedString(t);
                if ("object" == typeof t && null !== t) {
                    if (Array.isArray(t)) {
                        for (var r = [], n = 0, i = t; n < i.length; n++) {
                            var o = i[n];
                            r.push(e.prepare(o))
                        }
                        return r
                    }
                    r = {};
                    for (var a = 0, u = Object.keys(t); a < u.length; a++) {
                        var s = u[a];
                        r[s] = e.prepare(t[s])
                    }
                    return r
                }
                return t
            }, e.internalTryEvaluateExpression = function(e, t, r) {
                var i = new o;
                i.$root = t.$root,
                i.$data = t.$data,
                i.$index = t.$index;
                var u = void 0;
                if (r && ((u = new n.Options).nullSubstitution = function(e) {
                    var t = void 0;
                    return a.getUndefinedFieldValueSubstitutionString && (t = a.getUndefinedFieldValueSubstitutionString(e)), t || "${" + e + "}"
                }), e.type === n.ExpressionType.Concat && r) {
                    for (var s = "", l = 0, f = e.children; l < f.length; l++) {
                        var c = f[l],
                            d = void 0;
                        try {
                            d = c.tryEvaluate(i, u)
                        } catch (e) {
                            d = {
                                value: void 0,
                                error: e
                            }
                        }
                        d.error && (d.value = "${" + c.toString() + "}"),
                        s += d.value.toString()
                    }
                    return {
                        value: s,
                        error: void 0
                    }
                }
                return e.tryEvaluate(i, u)
            }, e.parseInterpolatedString = function(e) {
                if (e.indexOf("${") >= 0) {
                    var t = n.Expression.parse("`" + e + "`", (function(e) {
                        var t = n.ExpressionFunctions.standardFunctions.get(e);
                        return t || new n.ExpressionEvaluator(e, (function(t, r, n) {
                                throw new Error("Unknown function " + e)
                            }), n.ReturnType.String)
                    }));
                    if ("concat" === t.type) {
                        if (!(1 !== t.children.length || t.children[0] instanceof n.Constant))
                            return t.children[0];
                        if (2 === t.children.length) {
                            var r = t.children[0];
                            if (r instanceof n.Constant && "" === r.value && !(t.children[1] instanceof n.Constant))
                                return t.children[1]
                        }
                        return t
                    }
                }
                return e
            }, e.tryEvaluateExpression = function(t, r, n) {
                return e.internalTryEvaluateExpression(t, new i(r), n)
            }, e.prototype.expandSingleObject = function(e) {
                for (var t = {}, r = 0, n = Object.keys(e); r < n.length; r++) {
                    var i = n[r];
                    if (!this._context.isReservedField(i)) {
                        var o = this.internalExpand(e[i]);
                        void 0 !== o && (t[i] = o)
                    }
                }
                return t
            }, e.prototype.internalExpand = function(t) {
                var r;
                if (this._context.saveState(), Array.isArray(t)) {
                    for (var i = [], o = 0, a = t; o < a.length; o++) {
                        var u = a[o],
                            s = this.internalExpand(u);
                        null !== s && (Array.isArray(s) ? i = i.concat(s) : i.push(s))
                    }
                    r = i
                } else if (t instanceof n.Expression) {
                    if ((h = e.internalTryEvaluateExpression(t, this._context, !0)).error)
                        throw new Error(h.error);
                    r = h.value
                } else if ("object" == typeof t && null !== t) {
                    var l = t.$when,
                        f = t.$data,
                        c = !1,
                        d = void 0;
                    if (void 0 === f)
                        d = [void 0];
                    else {
                        if (f instanceof n.Expression) {
                            if ((h = e.internalTryEvaluateExpression(f, this._context, !0)).error)
                                throw new Error(h.error);
                            f = h.value
                        }
                        Array.isArray(f) ? (d = f, c = !0) : d = [f]
                    }
                    r = [];
                    for (var p = 0; p < d.length; p++) {
                        c && (this._context.$index = p),
                        void 0 !== d[p] && (this._context.$data = d[p]);
                        var v = !1;
                        if (l instanceof n.Expression) {
                            var h,
                                y = !1;
                            (h = e.internalTryEvaluateExpression(l, this._context, !1)).error || (y = "boolean" == typeof h.value && h.value),
                            v = !y
                        }
                        if (!v) {
                            var x = this.expandSingleObject(t);
                            null !== x && r.push(x)
                        }
                    }
                    0 === r.length ? r = null : 1 === r.length && (r = r[0])
                } else
                    r = t;
                return this._context.restoreLastState(), r
            }, e.prototype.expand = function(e) {
                return this._context = new i(e), this.internalExpand(this._preparedPayload)
            }, e
        }();
        t.Template = u
    }, function(t, r) {
        t.exports = e
    }])
}));
//# sourceMappingURL=adaptivecards-templating.min.js.map

